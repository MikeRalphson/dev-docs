require 'rest-client'
require 'json'


{{? data.method === 'put'}}
result = RestClient.{{=data.method}} '{{=data.url}}', {content_type: :json, accept: :json}, headers: {X-Auth-Client => 'ClientID', X-Auth-Token => 'AuthToken'}, params:
  {
		{{? data.parameters.length-1 != index}}
		{{~ data.parameters :p:index}}{{=p.name}}:'{{=p.type}}'{{? index == 0 }},{{?}}
		{{~}}{{?}}
  }
{{?? data.method === 'post'}}
result = RestClient.{{=data.method}} '{{=data.url}}', {content_type: :json, accept: :json}, headers: {X-Auth-Client => 'ClientID', X-Auth-Token => 'AuthToken'}, params:
  {
		{{? data.parameters.length-1 != index}}
		{{~ data.parameters :p:index}}{{=p.name}}:'{{=p.type}}'{{? index == 0 }},{{?}}
		{{~}}{{?}}
  }
{{?? data.method === 'get' || 'delete'}}
result = RestClient.{{=data.method}} '{{=data.url}}', {content_type: :json, accept: :json}, headers: {X-Auth-Client => 'ClientID', X-Auth-Token => 'AuthToken'}
{{?}}

p JSON.parse(result)
